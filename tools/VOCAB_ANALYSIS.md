# 雅思词库分析报告

## 📊 当前词库状态

### 词库来源
- **文件位置**：`tools/ielts_source.json`
- **当前词库数量**：约 75 个单词（需要扩充到 4000 个）

### 查看词库列表

```bash
# 查看完整词库列表
cd tools
cat ielts_source.json

# 或使用 Python 查看
python3 -c "import json; words = json.load(open('ielts_source.json')); print(f'总词数: {len(words)}'); print('\\n'.join(words[:20]))"
```

---

## 🎯 学习规划分析

### 目标设定
- **总目标词汇量**：4000 个雅思核心词
- **小说类型数**：4 类（重生、悬疑、言情、商战）
- **每类小说数量**：最多 50 篇
- **用户阅读模式**：可能只读一类小说

### 词汇覆盖计算

#### 场景 A：每类小说覆盖所有 4000 词（推荐）

**计算：**
- 总词汇量：4000 词
- 每类小说：50 篇
- 每篇需要词汇量：4000 ÷ 50 = **80 词/篇**

**评估：**
- ✅ **可行**：80 词/篇在 1500 字的小说中可以自然融入
- ✅ **用户留存**：1500 字不会太长，保持良好体验
- ✅ **学习效率**：每篇学习 80 词，50 篇覆盖全部 4000 词

**字数评估：**
- 当前设定：1500 字/篇，20 新词 + 5 复习词 = 25 词/篇
- 需要调整：**增加到 80 词/篇**（60 新词 + 20 复习词）
- **建议字数**：保持 1500 字（80 词在 1500 字中可以自然分布，密度：约每 18-19 字一个词）

#### 场景 B：所有类型共享词库（不推荐）

如果不同类型小说共享词库：
- 问题：用户只读一类小说时，无法学完所有词
- 不推荐此方案

---

## 📈 推荐方案

### 方案：每类小说独立覆盖全部 4000 词

**配置：**
- 每类小说：50 篇
- 每篇词汇量：**80 词**（60 新词 + 20 复习词）
- 每篇字数：**1500 字**
- 词汇密度：约每 18-19 字一个词（自然融入，不会过于密集）

**优势：**
1. ✅ 用户只读一类也能学完所有词
2. ✅ 1500 字保持良好阅读体验
3. ✅ 80 词在 1500 字中可以自然分布
4. ✅ 每类小说都是完整的学习路径

**实施步骤：**
1. 扩充 `ielts_source.json` 到 4000 词
2. 修改 `step1_get_prompt.py`：
   - `batch_size = 60`（新词）
   - `review_size = 20`（复习词）
3. 保持字数限制：1500 字

---

## 🔄 词库重复使用机制

### 当前设计
- 词库存储在 `ielts_source.json`
- 进度追踪存储在 `progress_tracker.json`
- **问题**：进度追踪是全局的，不同类型小说共享

### 推荐改进：按类型独立追踪

**方案 A：多进度文件（推荐）**
```
progress_tracker_reborn.json   # 重生类型进度
progress_tracker_suspense.json # 悬疑类型进度
progress_tracker_romance.json  # 言情类型进度
progress_tracker_business.json # 商战类型进度
```

**方案 B：单文件多类型（简化）**
```json
{
  "reborn": {
    "learned_words": [],
    "pending_words": [...],
    "current_count": 0
  },
  "suspense": {
    "learned_words": [],
    "pending_words": [...],
    "current_count": 0
  }
}
```

**实施建议：**
- 修改 `curriculum_manager.py`，支持按类型初始化进度
- 修改 `step2_save_chapter.py`，根据选择的类型使用对应的进度文件
- 确保每类小说都从完整的 4000 词库开始

---

## 📝 词库来源建议

### 4000 雅思核心词来源

1. **官方词表**
   - 雅思官方词汇表
   - Cambridge IELTS Vocabulary

2. **高频词库**
   - 雅思高频词汇 4000 词
   - 可根据频次排序选择

3. **词库格式**
   ```json
   [
     "word1",
     "word2",
     ...
     "word4000"
   ]
   ```

### 快速扩充方法

```bash
# 方法1：手动添加到 ielts_source.json
# 方法2：使用在线词库，批量导入
# 方法3：使用 Python 脚本处理词库文件
```

---

## ✅ 实施检查清单

- [ ] 扩充 `ielts_source.json` 到 4000 词
- [ ] 修改 `step1_get_prompt.py`：`batch_size=60, review_size=20`
- [ ] 修改 `curriculum_manager.py`：支持按类型独立追踪
- [ ] 修改 `step2_save_chapter.py`：根据类型使用对应进度文件
- [ ] 更新 `story_config.json`：移除 `prev_summary`，改用 `theme`
- [ ] 测试：验证每类小说可以从 4000 词库重新开始

---

## 💡 建议

1. **优先扩充词库**：先达到 4000 词的目标
2. **保持字数限制**：1500 字/篇，保证用户留存
3. **按类型独立追踪**：让每类小说都能完整覆盖 4000 词
4. **词汇密度**：80 词/1500 字 ≈ 5.3%，不会过于密集

